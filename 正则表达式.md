# æ­£åˆ™è¡¨è¾¾å¼

> ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²çš„è§„åˆ™
>
> - åªèƒ½ç”¨æ¥å¤„ç†å­—ç¬¦è§„åˆ™
> - å®ƒæ˜¯ä¸€ä¸ªè§„åˆ™ï¼šå¯ä»¥éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸä¸ªè§„åˆ™ï¼ˆtestï¼‰ï¼Œä¹Ÿå¯ä»¥å§å­—ç¬¦ä¸²ä¸­ç¬¦åˆè§„åˆ™çš„å†…å®¹æ•èŽ·åˆ°ï¼ˆexec/match..)

### æ­£åˆ™è¡¨è¾¾å¼

ä¸¤ç§åˆ›å»ºæ–¹å¼

~~~javascript
// å­—é¢é‡åˆ›å»º
let reg1= /\d+/

// æž„é€ å‡½æ•°æ¨¡å¼åˆ›å»º ä¸¤ä¸ªå‚æ•°ï¼šå…ƒå­—ç¬¦ä¸²ï¼Œä¿®é¥°å­—ç¬¦ä¸²
let reg2= new RegExp("\\d+")
~~~

æ­£åˆ™è¡¨è¾¾å¼ç”±ä¸¤éƒ¨åˆ†ç»„æˆ

- å…ƒå­—ç¬¦
- ä¿®é¥°ç¬¦

~~~javascript
/*å¸¸ç”¨çš„å…ƒå­—ç¬¦*/
//=>1.é‡è¯å…ƒå­—ç¬¦ï¼šè®¾ç½®å‡ºçŽ°çš„æ¬¡æ•°
*    é›¶åˆ°å¤šæ¬¡
+	   ä¸€åˆ°å¤šæ¬¡
ï¼Ÿ   é›¶æ¬¡æˆ–ä¸€æ¬¡
{n}  å‡ºçŽ°næ¬¡
{n,} å‡ºçŽ°nåˆ°å¤šæ¬¡
{n,m}å‡ºçŽ°nåˆ°mæ¬¡

//=>2. ç‰¹æ®Šå…ƒå­—ç¬¦ï¼šå•ä¸ªæˆ–è€…ç»„åˆåœ¨ä¸€èµ·ä»£è¡¨ç‰¹æ®Šçš„å«ä¹‰
\    è½¬ä¹‰å­—ç¬¦
.    å‡º\nï¼ˆæ¢è¡Œç¬¦ï¼‰ä»¥å¤–çš„ä»»ä½•å­—ç¬¦
^    ä»¥å“ªä¸€ä¸ªå…ƒå­—ç¬¦ä½œä¸ºå¼€å§‹
$    ä»¥å“ªä¸€ä¸ªå…ƒå­—ç¬¦ä½œä¸ºç»“æŸ
\n   æ¢è¡Œç¬¦
\d   0~9
\w   æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ä¸­çš„ä»»æ„ä¸€ä¸ª
\s   ä¸€ä¸ªç©ºç™½å­—ç¬¦
\t   ä¸€ä¸ªå­è¡¨ä»˜ï¼ˆä¸€ä¸ªTABå»ºï¼‰
x|y  xæˆ–è€…yä¸­çš„ä¸€ä¸ªå­—ç¬¦
[xyz]xæˆ–è€…yæˆ–è€…zä¸­çš„ä¸€ä¸ªå­—ç¬¦
[^xy]é™¤äº† x/yä»¥å¤–ä»»ä½•ä»»æ„å­—ç¬¦
[a-z]æŒ‡å®ša-zè¿™ä¸ªèŒƒå›´ä¸­çš„ä»»æ„å­—ç¬¦
[^a-z]é™¤äº†a-zä»»æ„å­—ç¬¦
()   æ­£åˆ™ä¸­çš„åˆ†ç»„ç¬¦åˆ
(?:) å€¼åŒ¹é…æ•èŽ·
(?!) è´Ÿå‘é¢„æŸ¥
~~~

æ­£åˆ™ä¸­çš„å¸¸ç”¨ä¿®é¥°ç¬¦

~~~javascript
i => ignoreCase  å¿½ç•¥å•è¯å¤§å°å†™
g => global      å…¨å±€åŒ¹é…
m => multiline   å¯è¿›è¡Œå¤šè¡ŒåŒ¹é…
~~~

### å¸¸ç”¨å…ƒå­—ç¬¦åŒ¹é…

**1.^ $**

~~~javascript
let reg= /^\d/
console.log(reg.test('ccxs')) //flase
console.log(reg.test('12ccxs'))//true
console.log(reg.test('ccxs12')) //flase
~~~

~~~javascript
let reg = /\d$/
console.log(reg.test('ccxs'))//flase
console.log(reg.test('12ccxs')) //flase
console.log(reg.test('ccxs12')) //true
~~~

~~~javascript
// ä¸¤ä¸ªéƒ½ä¸åŠ ï¼šå­—ç¬¦ä¸­åŒ…å«ç¬¦åˆè§„åˆ™çš„å†…å®¹å³å¯
let reg=/\d+/

//ä¸¤ä¸ªéƒ½åŠ ï¼šå­—ç¬¦ä¸²åªèƒ½æ˜¯å’Œè§„åˆ™ä¸€è‡´çš„å†…å®¹
let reg2 =/^\d+$/

//egï¼šéªŒè¯æ‰‹æœºå·ðŸ´ï¼ˆ11ä½ï¼Œï¼‰
let reg = /^1\d{10}$/
~~~

**2.\\**

~~~javascript
// .ä¸æ˜¯å°æ•°ç‚¹ï¼Œæ˜¯é™¤\nä»¥å¤–çš„ä»»ä½•å­—ç¬¦
let reg = /^2.3$/
console.log("2.3") // true
console.log("2@3") // true
console.log("23") //false

//åŸºäºŽè½¬ä¹‰å­—ç¬¦ï¼Œå…¶åªèƒ½ä»£è¡¨å°æ•°ç‚¹
reg =/^2\.3$/
console.log(reg.test('2.3'))//true
console.log(reg.test('2@3')) // flase

let str ='\\d'
ret=/^\d$/
console.log(reg.test(str)) // false
reg =/^\\d$/æŠŠç‰¹æ®Šå­—ç¬¦è½¬æ¢ä¸ºæ™®é€š
console.log(reg.test(str))  // true
~~~

**3. x|y**

~~~javascript
let reg = /^18|29$/
console.log(reg.test("18")) //true
console.log(reg.test("29")) //true
console.log(reg.test("129"))//true
console.log(reg.test("189")) //true
console.log(reg.test("1829"))//true
console.log(reg.test("829"))//true
console.log(reg.test("182"))//true
//ç›´æŽ¥x|yä¼šå­˜åœ¨å¾ˆä¹±çš„ä¼˜å…ˆçº§é—®é¢˜ï¼Œä¸€èˆ¬æˆ‘ä»¬å†™çš„æ—¶å€™éƒ½ä¼´éšå°æ‹¬å·è¿›è¡Œåˆ†ç»„ï¼Œå› ä¸ºå°æ‹¬å·æ”¹å˜å¤„ç†çš„ä¼˜å…ˆçº§=>å°æ‹¬å·ï¼šåˆ†ç»„
reg = /^(18|29)$/
console.log(reg.test("18")) // true
console.log(reg.test("29")) //true
console.log(reg.test("129")) //flase
console.log(reg.test("189"))  //flase
~~~

**4.[]**

~~~javascript
//[]ä¸­ä¸€ç­ä»£è¡¨æœ¬èº«çš„å«ä¹‰
let reg = /^[@+]$/  //[]ä¸­çš„+å°±æ˜¯+å·çš„å«ä¹‰
console.log(reg.test('@'))
console.log(reg.test('+'))
console.log(reg.test('@@')) //flase
console.log(reg.test('@+')) //flase

reg=/^[\d]$/ //=>\dåœ¨æ‹¬å·ä¸­è¿˜æ˜¯0-9çš„å«ä¹‰

//2. []ä¸å­˜åœ¨å¤šä½æ•°
reg = /^[18]$/
console.log(reg.test('1'))
console.log(reg.test('8'))
console.log(reg.test('18')) //flase
~~~

~~~javascript
//é‚®ç®±æ­£åˆ™
let reg = /^\w((-\w+)|(\.\w+)*@[A-Za-z0-9])+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/
~~~

### æ­£åˆ™è¡¨è¾¾å¼çš„ä¸¤ç§åˆ›å»ºæ–¹å¼

~~~javascript
// æž„é€ å‡½æ•°æ˜¯å› ä¸ºä¼ é€’æ˜¯å­—ç¬¦ä¸²,\éœ€è¦å†™ä¸¤ä¸ªæ–œæ 
let reg = /\d+/g
reg = new RegExp("\\d+","g")

//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„éƒ¨åˆ†å†…å®¹æ˜¯å˜é‡å­˜å‚¨çš„å€¼
// 1. ä¸¤ä¸ªæ–œæ ä¸­é—´åŒ…èµ·æ¥çš„éƒ½æ˜¯å…ƒå­—ç¬¦ï¼ˆå¦‚æžœæ­£åˆ™ä¸­è¯åŒ…å«æŸä¸ªå˜é‡çš„å€¼åˆ™ä¸èƒ½ä½¿ç”¨å­—é¢é‡æ–¹æ³•åˆ›å»ºï¼‰
let type = 'ccxs'
reg =/^@"+type+"@$/
console.log(reg.test('@ccxs@')) //flase
console.log(reg.test('@""tyoeee@'))//true
//2.è¿™ç§æƒ…å†µåªèƒ½ç”¨æž„é€ å‡½æ•°æ–¹å¼ï¼ˆå› ä¸ºå®ƒä»¬ä¼ é€’æ˜¯å­—ç¬¦ä¸²ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æŽ¥ï¼‰
reg = new RegExp("^@"+type+"@$")
console.log(reg.test("@ccxs@"))
~~~

### æ­£åˆ™æ•èŽ·

~~~javascript
let str ='ccxs2022zxc10awr21wan2010'
let reg =/\d+/
/*
	åŸºäºŽexecå®žçŽ°æ­£åˆ™æ•èŽ·
		1. æ•èŽ·åˆ°çš„ç»“æžœæ˜¯nullæˆ–è€…ä¸€ä¸ªæ•°ç»„
			 ç¬¬ä¸€é¡¹ï¼šæœ¬æ¬¡æ•èŽ·åˆ°çš„å†…å®¹
			 å…¶ä½™é¡¹ï¼šå¯¹åº”å°ç»„æœ¬æ¬¡å•ç‹¬æ•èŽ·çš„å†…å®¹
			 indexï¼šå½“å‰æ•èŽ·å†…å®¹åœ¨å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ç´¢å¼•
			 inputï¼šåŽŸå§‹å­—ç¬¦ä¸²
		2. æ²¡æ‰§è¡Œä¸€ä¸ªexecï¼Œåªèƒ½æ•èŽ·åˆ°ä¸€ä¸ªç¬¦åˆè§„åˆ™çš„æ”¯ä»˜
*/
console.log(reg.exec(str))//['2022', index: 4, input: 'ccxs2022zxc10awr21wan2010', groups: undefined]


let reg= /\d+/g

const str = 'ccxs2022zxc10awr21wan2010'
/**
 * reg.lastIndex:å½“å‰æ­£åˆ™ä¸‹ä¸€æ¬¡åŒ¹é…çš„èµ·å§‹ç´¢å¼•ä½ç½®
 *    æ‡’æƒ°æ€§æ•èŽ·çš„åŽŸå› ï¼šé»˜è®¤æƒ…å†µä¸‹lastIndexçš„å€¼æ˜¯ä¸ä¼šä¿®æ”¹çš„ï¼Œæ¯ä¸€æ¬¡éƒ½æ˜¯ä»Žå­—ç¬¦ä¸²å¼€å§‹ä½ç½®æŸ¥æ‰¾ï¼Œæ‰€ä»¥æ‰¾åˆ°çš„æ°¸è¿œéƒ½åªæ˜¯ç¬¬ä¸€ä¸ª
 *    è§£å†³åŠžæ³•å…¨å±€ä¿®é¥°ç¬¦ g
*/
console.log(reg.lastIndex) //0
console.log(reg.exec(str))
console.log(reg.lastIndex)//8
console.log(reg.exec(str))
console.log(reg.lastIndex)//13
console.log(reg.exec(str))
console.log(reg.lastIndex)//18
console.log(reg.exec(str))
console.log(reg.lastIndex)//25
console.log(reg.exec(str))//null å½“å…¨éƒ¨æ•èŽ·åŽï¼Œåœ¨æ¬¡æ•èŽ·çš„ç»“æžœæ˜¯null  lastIndexåˆå›žå½’äº†åˆå§‹å€¼0ï¼Œå†æ¬¡æ•èŽ·åˆä»Žç¬¬ä¸€ä¸ªå¼€å§‹
console.log(reg.lastIndex)//0

let reg = /\d+/g
if(reg.test(str)){
  //åªæœ‰æ­£åˆ™å’Œå­—ç¬¦ä¸²åŒ¹é…æˆ‘ä»¬åœ¨æ•èŽ·
  console.log(reg.lastIndex) //4 åŸºäºŽteståŒ¹é…åŽlastIndexçš„å€¼å°±ä¸æ˜¯0äº†ï¼Œè¯´ä»¥ä¸‹ä¸€æ¬¡æ•èŽ·ä¸åœ¨ä»Žå¤´å¼€å§‹
  console.log(reg.exec(str)) ['10'.....]
}
~~~

~~~javascript
let reg = /\d+/g;

const str = 'ccxs2022zxc10awr21wan2010';

// ç¼–å†™ä¸€ä¸ªexecAllï¼Œæ‰§è¡Œä¸€æ¬¡å¯ä»¥æŠŠå…¨éƒ¨çš„ç»“æžœæ•èŽ·åˆ°
~(function () {
  function execAll(str = '') {
    if (!this.global) return this.exec(str);
    let newAry = [],
      res = this.exec(str);
    while (res) {
      newAry.push(res[0]);
      res = this.exec(str);
    }
    return newAry.length === 0 ? null : newAry;
  }

  RegExp.prototype.execAll = execAll;
})();

console.log(reg.execAll(str));
// å­—ç¬¦ä¸²ä¸­çš„matchæ–¹æ³•ï¼Œå¯ä»¥æ‰§è¡Œä¸€æ¬¡çš„æƒ…å†µä¸‹ï¼Œæ•èŽ·åˆ°æ‰€æœ‰åŒ¹é…çš„æ•°æ®ï¼ˆå¿…é¡»è®¾ç½®gæ‰å¯ä»¥ï¼‰
console.log('ccxs2022zxc10awr21wan2010'.match(reg))
~~~

### æ­£åˆ™çš„åˆ†ç»„æ•èŽ·

~~~javascript
let str = '42220220001028023x';
const reg = /^(\d{6})(\d{4})(\d{2})(\d{2})\d2(\d)(?:\d|x)$/;

console.log(reg.exec(str))
console.log(str.match(reg))
//['42120220001028023x', '421202', '2000', '10', '28', '3', index: 0, input: '42120220001028023x', groups: undefined]

/*
	ç¬¬ä¸€é¡¹ï¼šå¤§æ­£åˆ™åŒ¹é…çš„ç»“æžœ
	å…¶ä½™é¡¹ï¼šæ¯ä¸€ä¸ªå°åˆ†ç»„å•ç‹¬åŒ¹é…çš„ç»“æžœ
	å¦‚æžœè®¾ç½®äº†åˆ†ç»„ï¼ˆæ”¹å˜ä¼˜å…ˆçº§ï¼‰ï¼Œä½†æ˜¯æ•èŽ·çš„æ—¶å€™ä¸éœ€è¦å•ç‹¬æ•èŽ·ï¼Œå¯ä»¥åŸºäºŽ?:æ¥å¤„ç†
*/
~~~

### æ­£åˆ™æ•èŽ·çš„è´ªå©ª

~~~javascript
let str = 'ccxs2020@1021zxc'
//è´ªå©ªæ€§ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™æ•èŽ·çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§å½“å‰æ­£åˆ™æ‰€åŒ¹é…çš„æœ€é•¿ç»“æžœæ¥æ•èŽ·çš„
let reg =/\d+/g
console.log(str.match(reg))//[2020,1021]

//åœ¨é‡è¯å…ƒå­—ç¬¦åŽé¢è®¾ç½®ï¼Ÿ å–æ¶ˆæ•èŽ·æ—¶å€™çš„è´ªå©ªæ€§ï¼ˆæŒ‰ç…§æœ€çŸ­çš„åŒ¹é…ç»“æžœæ¥æ•èŽ·ï¼‰
reg = /\d+?/g
console.log(str.match(reg))//['2', '0', '2', '0', '1', '0', '2', '1']
~~~

**é—®å·åœ¨æ­£åˆ™çš„ä½œç”¨**

- é—®å·å·¦è¾¹æ˜¯éžé‡è¯å…ƒå­—ç¬¦ï¼šæœ¬èº«ä»£è¡¨é‡è¯å…ƒå­—ç¬¦ï¼Œå‡ºçŽ°0åˆ°ä¸€æ¬¡
- é—®å·å·¦è¾¹æ˜¯é‡è¯å…ƒå­—ç¬¦ï¼šå–æ¶ˆæ•èŽ·æ—¶å€™çš„è´ªå©ªæ€§
- (?:)åªåŒ¹é…ä¸æ•èŽ·
- (?=)æ­£å‘é¢„æŸ¥
- (?!)è´Ÿå‘é¢„æŸ¥

### æ­£åˆ™æ•èŽ·çš„å…¶ä»–æ–¹å¼

1. testä¹Ÿèƒ½æ•èŽ·

   ~~~javascript
   let str ='{0}å¹´{1}æœˆ{2}æ—¥'
   let reg = /\{(\d+)\}/g
   console.log(reg.test(str))//true
   console.log(reg.$1) //=>'0'
   
   console.log(reg.test(str))//true
   console.log(reg.$1) //=>'1'
   
   console.log(reg.test(str))//true
   console.log(reg.$1) //=>'2'
   //RegExp.$1~RegExp.$9:æ•èŽ·å½“å‰æœ¬æ¬¡æ­£åˆ™åŒ¹é…åŽï¼Œç¬¬ä¸€åˆ°ç¬¬9ä¸ªåˆ†ç»„çš„ä¿¡æ¯
   ~~~

2. replaceå­—ç¬¦ä¸²ä¸­å®žçŽ°æ›¿æ¢çš„æ–¹æ³•ï¼ˆä¸€èˆ¬éƒ½æ˜¯ä¼´éšæ­£åˆ™ä¸€èµ·ä½¿ç”¨çš„ï¼‰

~~~javascript
let str ='ccxs@2020|ccxs@2323'

str =str.replace('ccxs','ccxsawr').replace('ccxs','ccxsawr')
//'ccxsawrawr@2020|ccxs@2323' æ¯ä¸€æ¬¡æ›¿æ¢éƒ½æ˜¯ä»Žç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹æ‰¾çš„ï¼ˆç±»ä¼¼æ­£åˆ™æ•èŽ·çš„æ‡’æƒ°æ€§ï¼‰

//åŸºäºŽæ­£åˆ™gå¯ä»¥å®žçŽ°æ›¿æ¢
str = str.replace(/ccxs/g,'ccxsawr')
~~~

æ ¼å¼åŒ–æ—¥æœŸ

~~~javascript
let time='2021-09-13'
const reg = /^(\d{4})-(\d{1,2})-(\d{1,2})$/g
time = time.replace(reg,'$1å¹´$2æœˆ$3æ—¥')
console.log(time)//2021å¹´09æœˆ13æ—¥

// è¿˜å¯ä»¥è¿™æ ·å¤„ç†[str].replace([reg],[function])
//1.é¦–å…ˆregå’Œtimeè¿›è¡ŒåŒ¹é…æ•èŽ·ï¼Œèƒ½åŒ¹é…åˆ°å‡ æ¬¡å°±ä¼šæŠŠä¼ é€’çš„å‡½æ•°æ‰§è¡Œå‡ æ¬¡
//2.ä¸ä»…æŠŠæ–¹æ³•æ‰§è¡Œï¼Œè€Œä¸”replaceè¿˜å¯ä»¥ç»™æ–¹æ³•ä¼ é€’å®žå‚ä¿¡æ¯ï¼ˆå’Œexecæ•èŽ·çš„å†…å®¹å¤§è‡´ä¸€è‡´ï¼šå¤§æ­£åˆ™åŒ¹é…çš„å†…å®¹å’Œï¼Œå°åˆ†ç»„çš„ä¿¡æ¯...ï¼‰
time = time.replace(reg,(...ary)=>{
  console.log(ary)
  //['2021-09-13', '2021', '09', '13'... ]
})

time = time.replace(reg,(...arg)=>{
  let[,$1,$2,$3]=arg;
  return $1+'å¹´'+$2+'æœˆ'+$3+'æ—¥'  //2021å¹´09æœˆ13æ—¥
})

~~~

å•è¯é¦–å­—ç¬¦å¤§å†™

~~~javascript
let str ='good ccxs awr dota'
const reg =/\b([a-zA-Z])[a-z]*\b/g

str= str.replace(reg,(...ary)=>{
  return ary[1].toUpperCase() +ary[0].slice(1)
})
console.log(str) //Good Ccxs Awr Dota
~~~

