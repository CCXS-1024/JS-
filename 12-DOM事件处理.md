### DOMäº‹ä»¶å¤„ç†

> äº‹ä»¶æ˜¯å…ƒç´ å¤©ç”Ÿè‡ªå¸¦çš„é»˜è®¤æ“ä½œè¡Œä¸º
>
> - ä¸è®ºæˆ‘ä»¬æ˜¯å¦ç»™å…¶ç»‘å®šäº†æ–¹æ³•ï¼Œå½“æˆ‘ä»¬æ“ä½œçš„æ—¶å€™ï¼Œä¹Ÿä¼šæŠŠå¯¹åº”çš„äº‹ä»¶è§¦å‘äº‹ä»¶ç»‘å®šæ˜¯ç»™å…ƒç´ çš„æŸä¸ªè¡Œä¸ºç»‘å®šä¸€ä¸ªæ–¹æ³•
> - ç›®çš„æ˜¯å½“å‰äº‹ä»¶è¡Œä¸ºè§¦å‘çš„æ—¶å€™ï¼Œå¯ä»¥åšä¸€äº›äº‹æƒ…

**å¸¸ç”¨çš„äº‹ä»¶è¡Œä¸º**

- [é¼ æ ‡äº‹ä»¶]
  - click ç‚¹å‡»ï¼ˆç§»åŠ¨ç«¯clickè¢«è¯†åˆ«ä¸ºå•å‡»ï¼‰
  - dblclick åŒå‡»
  - mousedown é¼ æ ‡æŒ‰ä¸‹
  - mouseupé¼ æ ‡æŠ¬èµ·
  - mousemove é¼ æ ‡ç§»åŠ¨
  - mouseover  é¼ æ ‡åˆ’è¿‡
  - mouseout é¼ æ ‡æ»‘å‡º
  - mouseenter é¼ æ ‡è¿›å…¥
  - mouseleaveé¼ æ ‡ç¦»å¼€
  - mousewhell é¼ æ ‡æ»šåŠ¨
- [é”®ç›˜äº‹ä»¶]
  - keydown æŒ‰ä¸‹æŸä¸ªé”®
  - keyup æŠ¬èµ·æŸä¸ªé”®
  - keypress é™¤shift / FN/capslockä»¥å¤–çš„é”®ï¼Œå…¶ä»–é”®æŒ‰ä½ï¼ˆè¿ç»­è§¦å‘ï¼‰
- [ç§»åŠ¨ç«¯æ‰‹æŒ‡äº‹ä»¶]
  - **å•æ‰‹æŒ‡äº‹ä»¶æ¨¡å‹ Touch**
    - touchstart æ‰‹æŒ‡æŒ‰ä¸‹
    - touchmove æ‰‹æŒ‡ç§»åŠ¨
    - touchend æ‰‹æŒ‡æ¾å¼€
    - touchcancel æ“ä½œå–æ¶ˆï¼ˆä¸€èˆ¬ç”¨äºéæ­£å¸¸æƒ…å†µä¸‹æ“ä½œç»“æŸï¼‰
  - å¤šæ‰‹æŒ‡æ¨¡å‹ Gesture
    - gesturestart
    - Gesturechange / gestureupdate
    - gestureend
    - gesturecancel
- [è¡¨å•å…ƒç´ å¸¸ç”¨äº‹ä»¶]
  - foucus è·å–ç„¦ç‚¹
  - blur å¤±å»ç„¦ç‚¹
  - change å†…å®¹æ”¹å˜
- [éŸ³è§†é¢‘å¸¸ç”¨äº‹ä»¶]
  - canplay  å¯ä»¥æ’­æ”¾ï¼ˆèµ„æºæ²¡æœ‰åŠ è½½å®Œï¼Œæ’­æ”¾å¯èƒ½å¡é¡¿ï¼‰
  - canplaythrough å¯ä»¥æ’­æ”¾ï¼ˆèµ„æºå·²ç»åŠ è½½å®Œï¼Œæ’­æ”¾ä¸ä¼šå¡é¡¿ï¼‰
  - play å¼€å§‹æ’­æ”¾
  - playing æ’­æ”¾ä¸­
  - pause æš‚åœæ’­æ”¾
- [å…¶ä»–å¸¸ç”¨äº‹ä»¶]
  - load åŠ è½½å®Œ
  - unload èµ„æºå¸è½½
  - beforeunload å½“å‰é¡µé¢å…³é—­ä¹‹å‰
  - error èµ„æºåŠ è½½å¤±è´¥
  - scroll æ»šåŠ¨æ—¶é—´
  - Readystatechange AJAXè¯·æ±‚çŠ¶æ€æ”¹å˜äº‹ä»¶

### DOM0 å’ŒDOM2çš„åŒºåˆ«

> - [DOM0]
>   - Element.onäº‹ä»¶è¡Œä¸º=function(){}
> - [DOM2]
>   - å…ƒç´ .addEventListener(äº‹ä»¶è¡Œä¸º,function(){},true/false)

~~~javascript
// DOM0äº‹ä»¶ç»‘å®šçš„åŸç†ï¼šç»™å½“å‰å…ƒç´ çš„ç§æœ‰å±æ€§èµ‹å€¼ï¼Œå½“å‰äº‹ä»¶è§¦å‘ï¼Œæµè§ˆå™¨ä¼šå¸®æˆ‘ä»¬æŠŠèµ‹å€¼çš„å€¼æ‰§è¡Œï¼Œä½†æ˜¯è¿™å¯¼è‡´â€åªèƒ½ç»™å½“å‰å…ƒç´ æŸä¸€ä¸ªäº‹ä»¶è¡Œä¸ºç»‘å®šè¿™ä¸ªæ–¹æ³•â€œ
box.onclick = function(){
  console.log('ccxs')
}
box.onclick = function(){
  console.log('zxc')
}// 'zxc'

//DOM2äº‹ä»¶ç»‘å®šçš„åŸç†ï¼šåŸºäºåŸå‹é“¾æŸ¥æ‰¾æœºåˆ¶ï¼Œæ‰¾åˆ°EventTarget.prototypeä¸Šçš„æ–¹æ³•å¹¶ä¸”æ‰§è¡Œï¼Œä¼šæŠŠå½“å‰å…ƒç´ æŸä¸ªäº‹ä»¶è¡Œä¸ºç»‘å®šçš„æ‰€æœ‰æ–¹æ³•ï¼Œå­˜æ”¾åˆ°æµè§ˆå™¨é»˜è®¤çš„äº‹ä»¶æ± ä¸­ï¼ˆç»‘å®šçš„å‡ ä¸ªæ–¹æ³•ï¼Œä¼šå‘äº‹ä»¶æ± å­˜æ”¾å‡ ä¸ªï¼‰ï¼Œå½“äº‹ä»¶è§¦å‘ï¼Œä¼šæŠŠäº‹ä»¶æ± ä¸­å­˜å‚¨çš„å¯¹åº”æ–¹æ³•ï¼Œä¾æ¬¡æŒ‰ç…§é¡ºåºæ‰§è¡Œ
box.addEventListener('click',function(){
  console.log('ccxs')
},flase)
box.addEventListener('click',function(){
  console.log('zxc')
},flase)
// 'ccxs'
//'zxc'

//DOM2 äº‹ä»¶ç»‘å®šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½é‡‡ç”¨å®åå‡½æ•°ï¼Œ
//ç›®çš„ï¼šè¿™æ ·å¯ä»¥åŸºäºå®åå‡½æ•°å»ç§»é™¤äº‹ä»¶ç»‘å®š
function fn(){
  console.log('rance')
}
box.addEventListener('click',fn,false)
//åŸºäºDOM2å‘äº‹ä»¶æ± ä¸­æ·»åŠ æ–¹æ³•ï¼Œå­˜åœ¨å»é‡çš„æœºåˆ¶â€åŒä¸€ä¸ªå…ƒç´ ï¼ŒåŒä¸€ä¸ªäº‹ä»¶ç±»å‹ï¼Œåœ¨äº‹ä»¶æ± ä¸­åªèƒ½å­˜å‚¨ä¸€éè¿™ä¸ªæ–¹æ³•ï¼Œä¸èƒ½é‡å¤å­˜å‚¨â€œ
~~~

<font color="red">DOM0å’ŒDOM2å¯ä»¥æ··åœ¨ä¸€èµ·ä½¿ç”¨ï¼šæ‰§è¡Œçš„æ—¶å€™ä¾æ¬¡æŒ‰ç…§é¡ºåºæ‰§è¡Œè¾“å‡º</font>

~~~~JavaScript
// DOM0èƒ½åšçš„äº‹ä»¶ï¼ŒDOM2éƒ½æ”¯æŒï¼›DOm2é‡Œé¢çš„ä¸€äº›äº‹ä»¶ï¼ŒDOM0ä¸ä¸€å®šæ”¯æŒegï¼štransitionendã€DOMContentLOaded....

window.addEventListener('load',function(){
  // æ‰€æœ‰èµ„æºéƒ½åŠ è½½å®Œæˆè§¦å‘
})
window.addEventListener('DOMContentLoaded',function(){
  // åªè¦DOMç»“æœåŠ è½½å®Œå°±ä¼šè§¦å‘
  // jQä¸­çš„$(function(){}) å°±æ˜¯ä¾æ®è¿™ä¸ªå®ç°çš„
})
// jqä¸­æ‰€æœ‰çš„äº‹ä»¶ç»‘å®šéƒ½æ˜¯åŸºäº DOM2 ç»‘å®šçš„
~~~~

### äº‹ä»¶å¯¹è±¡

> ç»™å…ƒç´ çš„äº‹ä»¶è¡Œä¸ºç»‘å®šæ–¹æ³•ï¼Œå½“äº‹ä»¶è¡Œä¸ºè§¦å‘ä¼šè¢«æ‰§è¡Œï¼Œä¸ä»…æ‰§è¡Œï¼Œè€Œä¸”ä¼šæŠŠå½“å‰æ“ä½œçš„ç›¸å…³ä¿¡æ¯ä¼ é€’ç»™è¿™ä¸ªå‡½æ•° => â€äº‹ä»¶å¯¹è±¡â€œ

![æˆªå±2022-08-03 15.12.05](/Users/ccxs/Documents/ç¬”è®°/js-ç¬”è®°/12-DOMäº‹ä»¶å¤„ç†.assets/æˆªå±2022-08-03 15.12.05.png)

**é¼ æ ‡äº‹ä»¶å¯¹è±¡**

~~~javascript
box.onclick = function(ev){
  //  é¼ æ ‡äº‹ä»¶å¯¹è±¡
  
  //  clientX/clientY:å½“å‰é¼ æ ‡è§¦å‘ç‚¹è·ç¦»çª—å£åšä¸Šè§’x/yè½´åæ ‡
  //  pageX/pageYï¼šå½“å‰é¼ æ ‡è§¦å‘ç‚¹è·ç¦»é¡µé¢å·¦ä¸Šè§’x/yè½´åæ ‡
  //  type :è§¦å‘çš„ç±»å‹
  //  targetï¼šäº‹ä»¶åŸï¼ˆé‚£ä¸ªå…ƒç´ è§¦å‘äº† å°±æ˜¯é‚£ä¸ªå‡½æ•°ï¼‰
  //  preventDefault():ç”¨æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºçš„æ–¹æ³•ï¼Œä¸å…¼å®¹æµè§ˆå™¨
  //  stopPropagation(): é˜»æ­¢å†’æ³¡ä¼ æ’­ ä¸å…¼å®¹çš„æµè§ˆå™¨ä¸­ä¹Ÿå¯ä»¥åªè¦ev.cancelBubble =true ä¹Ÿå¯ä»¥é˜»æ­¢é»˜è®¤è¡Œä¸º
  console.log(ev)
}
// äº‹ä»¶å¯¹è±¡å’Œå‡½æ•°ä»¥åŠç»™è°ç»‘å®šæ²¡æœ‰ä»€ä¹ˆå¿…ç„¶çš„å…³ç³»ï¼Œå®ƒå­˜å‚¨çš„æ˜¯å½“å‰æœ¬æ¬¡æ“ä½œçš„ç›¸å…³ä¿¡æ¯ï¼Œæ“ä½œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä»½ä¿¡æ¯ï¼Œæ‰€æœ‰åœ¨é‚£ä¸ªæ–¹æ³•ä¸­è·å–çš„ä¿¡æ¯éƒ½æ˜¯ä¸€æ ·çš„ï¼›ç¬¬äºŒæ¬¡æ“ä½œï¼Œå­˜å‚¨çš„ä¿¡æ¯ä¼šæŠŠä¸Šä¸€æ¬¡å­˜å‚¨çš„ä¿¡æ¯ç»™æ›¿æ¢æ‰...
let obj =null
box.addEventListerner('click',function(ev){
  obj =ev
})
box.addEventListerner('click',function(ev){
 	console.log(obj===ev) //true
})
document.body.onclick = function(ev){
  console.log(ev===obj) //true
}
~~~

**é˜»æ­¢aæ ‡ç­¾çš„é»˜è®¤è¡Œä¸º**

~~~javascript
//1.herf="javascript:;"
//2 aæ ‡ç­¾æ˜¯å…ˆè§¦å‘click äº‹ä»¶ï¼Œç„¶åå†å»æ‰§è¡Œhref çš„è·³è½¬
a.onclick = function(){
  return false //è¿™æ ·ä¹Ÿå¯ä»¥
}
//3
a.onclick = function(ev){
  ev.preventDefault()
}
~~~

**é”®ç›˜äº‹ä»¶å¯¹è±¡**

~~~javascriptD
window.onkeydown = function(){
  // code & key å­˜å‚¨çš„éƒ½æ˜¯æŒ‰é”®ï¼Œcodeæ›´ä»”ç»†
  // keycode & which å­˜å‚¨çš„éƒ½æ˜¯é”®ç›˜å¯¹åº”çš„ğŸ´å€¼
}
~~~

## äº‹ä»¶çš„ä¼ æ’­æœºåˆ¶

### æ•è·é˜¶æ®µ

>  ä»æœ€å¤–å±‚å‘æœ€é‡Œå±‚äº‹ä»¶åŸä¾æ¬¡è¿›è¡ŒæŸ¥æ‰¾ï¼ˆç›®çš„ï¼šæ˜¯ä¸ºå†’æ³¡é˜¶æ®µäº‹å…ˆè®¡ç®—å¥½ä¼ æ’­çš„å±‚çº§è·¯å¾„ï¼‰

### ç›®æ ‡é˜¶æ®µ

> å½“å‰å…ƒç´ çš„ç›¸å…³äº‹ä»¶è¡Œä¸ºè§¦å‘

### å†’æ³¡ä¼ æ’­

> è§¦å‘å½“å‰å…ƒç´ çš„æŸä¸€ä¸ªè¡Œä¸ºï¼Œä¸ä»…ä»–çš„è¿™ä¸ªè¡Œä¸ºè¢«è§¦å‘äº†ï¼Œè€Œä¸”å®ƒæ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ï¼ˆä¸€ç›´åˆ°windowï¼‰ç›¸å…³çš„äº‹ä»¶è¡Œä¸ºéƒ½ä¼šè¢«ä¾æ¬¡è§¦å‘ï¼ˆä»å†…åˆ°ä½ï¼‰

![æˆªå±2022-08-03 19.53.48](/Users/ccxs/Documents/ç¬”è®°/js-ç¬”è®°/12-DOMäº‹ä»¶å¤„ç†.assets/æˆªå±2022-08-03 19.53.48.png)

**mouseover å’Œ mouseenterçš„åŒºåˆ«**

![æˆªå±2022-08-03 20.15.46](/Users/ccxs/Documents/ç¬”è®°/js-ç¬”è®°/12-DOMäº‹ä»¶å¤„ç†.assets/æˆªå±2022-08-03 20.15.46.png)

### äº‹ä»¶å§”æ‰˜

> 1. åŸºäºäº‹ä»¶çš„å†’æ³¡ä¼ æ’­æœºåˆ¶å®Œæˆ
> 1. å¦‚æœä¸€ä¸ªå®¹å™¨ä¸­å¾ˆå¤šå…ƒç´ éƒ½è¦åœ¨è§¦å‘æŸä¸€ä¸ªäº‹ä»¶çš„æ—¶å€™åšä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å½“å‰å®¹å™¨çš„è¿™ä¸ªäº‹ä»¶è¡Œä¸ºç»‘å®šæ–¹æ³•ï¼Œè¿™æ ·ä¸è®ºæ˜¯è§¦å‘åä»£ä¸­é‚£ä¸€ä¸ªå…ƒç´ çš„ç›¸å…³äº‹ä»¶è¡Œä¸ºï¼Œç”±äºå†’æ³¡ä¼ æ’­æœºåˆ¶ï¼Œå½“å‰å®¹å™¨ç»‘å®šçš„æ–¹æ³•éƒ½è¦è¢«è§¦å‘
> 1. æƒ³çŸ¥é“ç‚¹å‡»è°ï¼Œåªéœ€è¦åŸºäºäº‹ä»¶å¯¹è±¡ä¸­çš„ev.targetäº‹ä»¶åŸè·å¾—å³å¯
>
> => äº‹ä»¶å§”æ‰˜å¯ä»¥ä¼˜åŒ–æ€§èƒ½

###  dragäº‹ä»¶

> å¯ä»¥æŠŠä¸€ä¸ªå…ƒç´ ä»å½“å‰ä½ç½®æ‹–åˆ°æŒ‡å®šçš„å®¹å™¨ä¸­
>
> - dragstart å½“ç”¨æˆ·å¼€å§‹æ‹–åŠ¨ä¸€ä¸ªå…ƒç´ æˆ–è€…ä¸€ä¸ªé€‰æ‹©æ–‡æœ¬çš„æ—¶å€™ `dragstart` äº‹ä»¶å°±ä¼šè§¦å‘
> - drag  å½“å…ƒç´ æˆ–è€…é€‰æ‹©çš„æ–‡æœ¬è¢«æ‹–åŠ¨æ—¶è§¦å‘ `drag` äº‹ä»¶ (æ¯å‡ ç™¾æ¯«ç§’).
> - dragend æ‹–æ”¾äº‹ä»¶åœ¨æ‹–æ”¾æ“ä½œç»“æŸæ—¶è§¦å‘ (é€šè¿‡é‡Šæ”¾é¼ æ ‡æŒ‰é’®æˆ–å•å‡» escape é”®)ã€‚
> - dragover  æ‹–åŠ¨å…ƒç´ åˆ°æŒ‡å®šçš„ç›®æ ‡åŒºåŸŸä¸Šè§¦å‘ï¼ˆæ¯å‡ ç™¾æ¯«ç§’è§¦å‘ä¸€æ¬¡ï¼‰ã€‚
> - Drop  å¯ä»¥æŠŠæ‹–åŠ¨å…ƒç´ æ”¾åˆ°ç›®æ ‡åŒºåŸŸä¸­äº† ( äº‹ä»¶è¢«æŠ›å‡º)ã€‚

~~~javascript
const box = document.querySelector('.box'),
        container = document.querySelector('.container');
      box.ondragstart = function (ev) {
        //DragEvent:æ‹–æ‹½äº‹ä»¶å¯¹è±¡
        // dataTransfer: setData/getData/clearData è®¾ç½®çš„å†…å®¹æœ€åéƒ½ä¼šå˜ä¸ºå­—ç¬¦ä¸²  setData(ç±»å‹æ ‡è¯†ï¼Œå¯¹åº”çš„å€¼)
        // ç±»å‹æ ‡è¯† text/plan text / html text/url-list ..
        ev.dataTransfer.setData('text/plan', box);
      };
      container.ondragover = function (ev) {
        ev.preventDefault();
      };
      container.ondrop = function (ev) {
        ev.preventDefault();
        container.appendChild(box);
      };
~~~

